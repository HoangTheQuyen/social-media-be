module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=5)}([function(e,t){e.exports=require("express")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={env:"production",port:process.env.PORT||3e3,jwtSecret:process.env.JWT_SECRET||"YOUR_secret_key",mongoUri:process.env.MONGODB_URI||process.env.MONGO_HOST||"mongodb://"+(process.env.IP||"localhost")+":"+(process.env.MONGO_PORT||"27017")+"/socialmedia"};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(3)),o=s(r(16));function s(e){return e&&e.__esModule?e:{default:e}}var u=new n.default.Schema({name:{type:String,trim:!0,required:"Name is required"},email:{type:String,trim:!0,unique:"Email already exists",match:[/.+\@.+\..+/,"Please fill a valid email address"],required:"Email is required"},hashed_password:{type:String,required:"Password is required"},salt:String,updated:Date,created:{type:Date,default:Date.now}});u.virtual("password").set(function(e){this._password=e,this.salt=this.makeSalt(),this.hashed_password=this.encryptPassword(e)}).get(function(){return this._password}),u.path("hashed_password").validate(function(e){this._password&&this._password.length<6&&this.invalidate("password","Password must be at least 6 characters."),this.isNew&&!this._password&&this.invalidate("password","Password is required")},null),u.methods={authenticate:function(e){return this.encryptPassword(e)===this.hashed_password},encryptPassword:function(e){if(!e)return"";try{return o.default.createHmac("sha1",this.salt).update(e).digest("hex")}catch(e){return""}},makeSalt:function(){return Math.round((new Date).valueOf()*Math.random())+""}},t.default=n.default.model("User",u)},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(2)),o=a(r(19)),s=a(r(20)),u=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,s.default)({secret:u.default.jwtSecret,userProperty:"auth"});t.default={signin:function(e,t){n.default.findOne({email:e.body.email}).then(function(r){if(!r)return t.status("401").json({error:"User not found"});if(!r.authenticate(e.body.password))return t.status("401").send({error:"Email and password don't match."});var n=o.default.sign({_id:r._id},u.default.jwtSecret);return t.cookie("t",n,{expire:new Date+9999}),t.json({token:n,user:{_id:r._id,email:r.email,name:r.name}})}).catch(function(e){return t.status("401").json({error:"User not found"})})},signout:function(e,t){return t.clearCookie("t"),t.status("200").json({message:"signed out"})},requireSignin:i,hasAuthorization:function(e,t,r){if(!e.profile||!e.auth||e.profile._id!=e.auth._id)return t.status("403").json({error:"User is not authorized"});r()}}},function(e,t,r){e.exports=r(6)},function(e,t,r){"use strict";var n=u(r(1)),o=u(r(7)),s=u(r(3));function u(e){return e&&e.__esModule?e:{default:e}}s.default.Promise=global.Promise,s.default.connect(n.default.mongoUri),s.default.connection.on("error",function(){throw new Error("unable to connect to database: "+mongoUri)}),o.default.listen(n.default.port,function(e){e&&console.log(e),console.info("Server started on port %s.",n.default.port)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(0)),o=c(r(8)),s=c(r(9)),u=c(r(10)),a=c(r(11)),i=c(r(12)),d=c(r(13)),l=c(r(14)),f=c(r(21));function c(e){return e&&e.__esModule?e:{default:e}}var p=(0,n.default)();p.use(o.default.json()),p.use(o.default.urlencoded({extended:!0})),p.use((0,s.default)()),p.use((0,u.default)()),p.use((0,i.default)()),p.use((0,a.default)()),p.get("/",function(e,t){t.status(200).send((0,d.default)())}),p.use("/",l.default),p.use("/",f.default),p.use(function(e,t,r,n){"UnauthorizedError"===e.name&&r.status(401).json({error:e.name+": "+e.message})}),t.default=p},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("helmet")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return'<!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <meta http-equiv="X-UA-Compatible" content="ie=edge">\n        <title>SOCIAL MEDIA</title>\n    </head>\n    <body>\n        <div id="root">SOCIAL MEDIA</div>\n    </body>\n    </html>'}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(0)),o=u(r(15)),s=u(r(4));function u(e){return e&&e.__esModule?e:{default:e}}var a=n.default.Router();a.route("/api/users").get(o.default.list).post(o.default.create),a.route("/api/users/:userId").get(s.default.requireSignin,o.default.read),a.route("/api/users/:userId").put(s.default.requireSignin,s.default.hasAuthorization,o.default.update),a.route("/api/users/:userId").delete(s.default.requireSignin,s.default.hasAuthorization,o.default.remove),a.param("userId",o.default.userByID),t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(2)),o=u(r(17)),s=u(r(18));function u(e){return e&&e.__esModule?e:{default:e}}t.default={create:function(e,t,r){new n.default(e.body).save(function(e,r){if(e)return t.status(400).json({error:s.default.getErrorMessage(e)});t.status(200).json({message:"Successfully signed up!"})})},userByID:function(e,t,r,o){n.default.findById(o).exec(function(n,o){if(n||!o)return t.status("400").json({error:"User not found"});e.profile=o,r()})},read:function(e,t){return e.profile.hashed_password=void 0,e.profile.salt=void 0,t.json(e.profile)},list:function(e,t){n.default.find().select("name email updated created").then(function(e){t.json(e)}).catch(function(e){t.status(400).json({error:s.default.getErrorMessage(e)})})},remove:function(e,t,r){e.profile.remove(function(e,r){if(e)return t.status(400).json({error:s.default.getErrorMessage(e)});r.hashed_password=void 0,r.salt=void 0,t.json(r)})},update:function(e,t,r){var n=e.profile;(n=o.default.extend(n,e.body)).updated=Date.now(),n.save().then(function(e){e.hashed_password=void 0,e.salt=void 0,t.json(e)}).catch(function(e){return t.status(400).json({error:s.default.getErrorMessage(e)})})}}},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("lodash")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=void 0;try{var r=e.message.substring(e.message.lastIndexOf(".$")+2,e.message.lastIndexOf("_1"));t=r.charAt(0).toUpperCase()+r.slice(1)+" already exists"}catch(e){t="Unique field already exists"}return t};t.default={getErrorMessage:function(e){var t="";if(e.code)switch(e.code){case 11e3:case 11001:t=n(e);break;default:t="Something went wrong"}else for(var r in e.errors)e.errors[r].message&&(t=e.errors[r].message);return t}}},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("express-jwt")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(0)),o=s(r(4));function s(e){return e&&e.__esModule?e:{default:e}}var u=n.default.Router();u.route("/auth/signin").post(o.default.signin),u.route("/auth/signout").get(o.default.signout),t.default=u}]);