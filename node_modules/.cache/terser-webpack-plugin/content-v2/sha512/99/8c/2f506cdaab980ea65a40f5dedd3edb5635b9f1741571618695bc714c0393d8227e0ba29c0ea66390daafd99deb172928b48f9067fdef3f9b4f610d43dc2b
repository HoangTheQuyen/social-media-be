{"code":"module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"/dist/\",r(r.s=2)}([function(e,t){e.exports=require(\"express\")},function(e,t){e.exports=require(\"mongoose\")},function(e,t,r){e.exports=r(3)},function(e,t,r){\"use strict\";var n=u(r(4)),s=u(r(5)),o=u(r(1));function u(e){return e&&e.__esModule?e:{default:e}}o.default.Promise=global.Promise,o.default.connect(n.default.mongoUri),o.default.connection.on(\"error\",function(){throw new Error(\"unable to connect to database: \"+mongoUri)}),s.default.listen(n.default.port,function(e){e&&console.log(e),console.info(\"Server started on port %s.\",n.default.port)})},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={env:\"production\",port:process.env.PORT||3e3,jwtSecret:process.env.JWT_SECRET||\"YOUR_secret_key\",mongoUri:process.env.MONGODB_URI||process.env.MONGO_HOST||\"mongodb://\"+(process.env.IP||\"localhost\")+\":\"+(process.env.MONGO_PORT||\"27017\")+\"/socialmedia\"};t.default=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=f(r(0)),s=f(r(6)),o=f(r(7)),u=f(r(8)),a=f(r(9)),i=f(r(10)),d=f(r(11)),l=f(r(12));function f(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)();c.use(s.default.json()),c.use(s.default.urlencoded({extended:!0})),c.use((0,o.default)()),c.use((0,u.default)()),c.use((0,i.default)()),c.use((0,a.default)()),c.get(\"/\",function(e,t){t.status(200).send((0,d.default)())}),c.use(\"/\",l.default),t.default=c},function(e,t){e.exports=require(\"body-parser\")},function(e,t){e.exports=require(\"cookie-parser\")},function(e,t){e.exports=require(\"compression\")},function(e,t){e.exports=require(\"cors\")},function(e,t){e.exports=require(\"helmet\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){return'<!DOCTYPE html>\\n    <html lang=\"en\">\\n    <head>\\n        <meta charset=\"UTF-8\">\\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\\n        <title>SOCIAL MEDIA</title>\\n    </head>\\n    <body>\\n        <div id=\"root\">SOCIAL MEDIA</div>\\n    </body>\\n    </html>'}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=o(r(0)),s=o(r(13));function o(e){return e&&e.__esModule?e:{default:e}}var u=n.default.Router();u.route(\"/api/users\").get(s.default.list).post(s.default.create),u.route(\"/api/users/:userId\").get(s.default.read),u.route(\"/api/users/:userId\").put(s.default.update),u.route(\"/api/users/:userId\").delete(s.default.remove),u.param(\"userId\",s.default.userByID),t.default=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=u(r(14)),s=u(r(16)),o=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}t.default={create:function(e,t,r){new n.default(e.body).save(function(e,r){if(e)return t.status(400).json({error:o.default.getErrorMessage(e)});t.status(200).json({message:\"Successfully signed up!\"})})},userByID:function(e,t,r,s){n.default.findById(s).exec(function(n,s){if(n||!s)return t.status(\"400\").json({error:\"User not found\"});e.profile=s,r()})},read:function(e,t){return e.profile.hashed_password=void 0,e.profile.salt=void 0,t.json(e.profile)},list:function(e,t){n.default.find().select(\"name email updated created\").then(function(e){t.json(e)}).catch(function(e){t.status(400).json({error:o.default.getErrorMessage(e)})})},remove:function(e,t,r){e.profile.remove(function(e,r){if(e)return t.status(400).json({error:o.default.getErrorMessage(e)});r.hashed_password=void 0,r.salt=void 0,t.json(r)})},update:function(e,t,r){var n=e.profile;(n=s.default.extend(n,e.body)).updated=Date.now(),n.save().then(function(e){e.hashed_password=void 0,e.salt=void 0,t.json(e)}).catch(function(e){return t.status(400).json({error:o.default.getErrorMessage(e)})})}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=o(r(1)),s=o(r(15));function o(e){return e&&e.__esModule?e:{default:e}}var u=new n.default.Schema({name:{type:String,trim:!0,required:\"Name is required\"},email:{type:String,trim:!0,unique:\"Email already exists\",match:[/.+\\@.+\\..+/,\"Please fill a valid email address\"],required:\"Email is required\"},hashed_password:{type:String,required:\"Password is required\"},salt:String,updated:Date,created:{type:Date,default:Date.now}});u.virtual(\"password\").set(function(e){this._password=e,this.salt=this.makeSalt(),this.hashed_password=this.encryptPassword(e)}).get(function(){return this._password}),u.path(\"hashed_password\").validate(function(e){this._password&&this._password.length<6&&this.invalidate(\"password\",\"Password must be at least 6 characters.\"),this.isNew&&!this._password&&this.invalidate(\"password\",\"Password is required\")},null),u.methods={authenticate:function(e){return this.encryptPassword(e)===this.hashed_password},encryptPassword:function(e){if(!e)return\"\";try{return s.default.createHmac(\"sha1\",this.salt).update(e).digest(\"hex\")}catch(e){return\"\"}},makeSalt:function(){return Math.round((new Date).valueOf()*Math.random())+\"\"}},t.default=n.default.model(\"User\",u)},function(e,t){e.exports=require(\"crypto\")},function(e,t){e.exports=require(\"lodash\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(e){var t=void 0;try{var r=e.message.substring(e.message.lastIndexOf(\".$\")+2,e.message.lastIndexOf(\"_1\"));t=r.charAt(0).toUpperCase()+r.slice(1)+\" already exists\"}catch(e){t=\"Unique field already exists\"}return t};t.default={getErrorMessage:function(e){var t=\"\";if(e.code)switch(e.code){case 11e3:case 11001:t=n(e);break;default:t=\"Something went wrong\"}else for(var r in e.errors)e.errors[r].message&&(t=e.errors[r].message);return t}}}]);","extractedComments":[]}